
PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Create inventory] ********************************************************
ok: [localhost]

TASK [Create private key file] *************************************************
changed: [localhost]

TASK [Change permissions] ******************************************************
changed: [localhost]

PLAY RECAP *********************************************************************
localhost                  : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   


PLAY [APP_0001] ****************************************************************

TASK [Gathering Facts] *********************************************************
ok: [APP_0001]

TASK [deploy dolibarr app] *****************************************************

TASK [dolibarr : Remove file (delete file)] ************************************
ok: [APP_0001] => (item=/etc/apt/keyrings/docker.gpg)
ok: [APP_0001] => (item=/etc/apt/sources.list.d/docker.list)

TASK [dolibarr : Update APT Package Manager] ***********************************
changed: [APP_0001]

TASK [dolibarr : Install aptitude] *********************************************
ok: [APP_0001]

TASK [dolibarr : Install docker packages] **************************************
ok: [APP_0001] => (item=[u'apt-transport-https', u'ca-certificates', u'curl', u'software-properties-common', u'python3-pip', u'python3-setuptools'])

TASK [dolibarr : Add Docker s official GPG key] ********************************
ok: [APP_0001]

TASK [dolibarr : Verify that we have the key with the fingerprint] *************
ok: [APP_0001]

TASK [dolibarr : Set up the stable repository] *********************************
ok: [APP_0001]

TASK [dolibarr : Update apt packages] ******************************************
changed: [APP_0001]

TASK [dolibarr : Install docker] ***********************************************
ok: [APP_0001]

TASK [dolibarr : Add remote "ubuntu" user to "docker" group] *******************
ok: [APP_0001]

TASK [dolibarr : Install docker-compose version 1.29.2] ************************
changed: [APP_0001]

TASK [dolibarr : Check docker-compose exists] **********************************
ok: [APP_0001]

TASK [dolibarr : Move docker-compose to /usr/local/bin/docker-compose] *********
changed: [APP_0001]

TASK [dolibarr : Create workdir] ***********************************************
ok: [APP_0001]

TASK [dolibarr : Copy files in workdir] ****************************************
ok: [APP_0001]

TASK [dolibarr : Create directories for attach volumes] ************************
ok: [APP_0001] => (item=~/dolibarr/volumes)
ok: [APP_0001] => (item=~/dolibarr/volumes/db/mariadb)
ok: [APP_0001] => (item=~/dolibarr/volumes/web/)
ok: [APP_0001] => (item=~/dolibarr/volumes/web/documents)
ok: [APP_0001] => (item=~/dolibarr/volumes/web/html)
ok: [APP_0001] => (item=~/dolibarr/volumes/web/scripts)

TASK [dolibarr : Create and start services] ************************************
ok: [APP_0001]

TASK [dolibarr : Show results] *************************************************
ok: [APP_0001] => {
    "output": {
        "actions": [], 
        "changed": false, 
        "failed": false, 
        "services": {
            "cron": {
                "dolibarr_cron_1": {
                    "cmd": [
                        "apache2-foreground"
                    ], 
                    "image": "ans/dolibarr:17.0.2-php8.1", 
                    "labels": {
                        "com.docker.compose.config-hash": "c4368d320568eb1a95cd63f7102784a40ec907bda61fbcc2f99cc185667ed272", 
                        "com.docker.compose.container-number": "1", 
                        "com.docker.compose.oneoff": "False", 
                        "com.docker.compose.project": "dolibarr", 
                        "com.docker.compose.project.config_files": "/root/dolibarr/docker-compose.yml", 
                        "com.docker.compose.project.working_dir": "/root/dolibarr", 
                        "com.docker.compose.service": "cron", 
                        "com.docker.compose.version": "1.29.2", 
                        "maintainer": "Garcia MICHEL <garcia@soamichel.fr>"
                    }, 
                    "networks": {
                        "dolibarr_internal-pod": {
                            "IPAddress": "172.23.0.3", 
                            "IPPrefixLen": 16, 
                            "aliases": [
                                "cron", 
                                "8bdb7276f960"
                            ], 
                            "globalIPv6": "", 
                            "globalIPv6PrefixLen": 0, 
                            "links": null, 
                            "macAddress": "02:42:ac:17:00:03"
                        }
                    }, 
                    "state": {
                        "running": true, 
                        "status": "running"
                    }
                }
            }, 
            "mariadb": {
                "dolibarr_mariadb_1": {
                    "cmd": [
                        "mariadbd"
                    ], 
                    "image": "mariadb:latest", 
                    "labels": {
                        "com.docker.compose.config-hash": "f2d7f377c55f4ffafd4e91aade957031779d523b2b9d7360b7aa6f23e0004af8", 
                        "com.docker.compose.container-number": "1", 
                        "com.docker.compose.oneoff": "False", 
                        "com.docker.compose.project": "dolibarr", 
                        "com.docker.compose.project.config_files": "/root/dolibarr/docker-compose.yml", 
                        "com.docker.compose.project.working_dir": "/root/dolibarr", 
                        "com.docker.compose.service": "mariadb", 
                        "com.docker.compose.version": "1.29.2", 
                        "org.opencontainers.image.authors": "MariaDB Community", 
                        "org.opencontainers.image.base.name": "docker.io/library/ubuntu:jammy", 
                        "org.opencontainers.image.description": "MariaDB Database for relational SQL", 
                        "org.opencontainers.image.documentation": "https://hub.docker.com/_/mariadb/", 
                        "org.opencontainers.image.licenses": "GPL-2.0", 
                        "org.opencontainers.image.ref.name": "ubuntu", 
                        "org.opencontainers.image.source": "https://github.com/MariaDB/mariadb-docker", 
                        "org.opencontainers.image.title": "MariaDB Database", 
                        "org.opencontainers.image.url": "https://github.com/MariaDB/mariadb-docker", 
                        "org.opencontainers.image.vendor": "MariaDB Community", 
                        "org.opencontainers.image.version": "11.0.2"
                    }, 
                    "networks": {
                        "dolibarr_internal-pod": {
                            "IPAddress": "172.23.0.2", 
                            "IPPrefixLen": 16, 
                            "aliases": [
                                "f5a9348b2745", 
                                "mariadb"
                            ], 
                            "globalIPv6": "", 
                            "globalIPv6PrefixLen": 0, 
                            "links": null, 
                            "macAddress": "02:42:ac:17:00:02"
                        }
                    }, 
                    "state": {
                        "running": true, 
                        "status": "running"
                    }
                }
            }, 
            "web": {
                "dolibarr_web_1": {
                    "cmd": [
                        "apache2-foreground"
                    ], 
                    "image": "ans/dolibarr:17.0.2-php8.1", 
                    "labels": {
                        "com.docker.compose.config-hash": "bdbb9d9b2f234c9ef3a4d54876d27eff59a34665fb1fe69e80abeae47374149e", 
                        "com.docker.compose.container-number": "1", 
                        "com.docker.compose.oneoff": "False", 
                        "com.docker.compose.project": "dolibarr", 
                        "com.docker.compose.project.config_files": "/root/dolibarr/docker-compose.yml", 
                        "com.docker.compose.project.working_dir": "/root/dolibarr", 
                        "com.docker.compose.service": "web", 
                        "com.docker.compose.version": "1.29.2", 
                        "maintainer": "Garcia MICHEL <garcia@soamichel.fr>"
                    }, 
                    "networks": {
                        "dolibarr_external-pod": {
                            "IPAddress": "172.24.0.2", 
                            "IPPrefixLen": 16, 
                            "aliases": [
                                "web", 
                                "b5cf8396749b"
                            ], 
                            "globalIPv6": "", 
                            "globalIPv6PrefixLen": 0, 
                            "links": null, 
                            "macAddress": "02:42:ac:18:00:02"
                        }, 
                        "dolibarr_internal-pod": {
                            "IPAddress": "172.23.0.4", 
                            "IPPrefixLen": 16, 
                            "aliases": [
                                "web", 
                                "b5cf8396749b"
                            ], 
                            "globalIPv6": "", 
                            "globalIPv6PrefixLen": 0, 
                            "links": null, 
                            "macAddress": "02:42:ac:17:00:04"
                        }
                    }, 
                    "state": {
                        "running": true, 
                        "status": "running"
                    }
                }
            }
        }
    }
}

TASK [deploy orangehrm app] ****************************************************
skipping: [APP_0001]

TASK [deploy prestashop app] ***************************************************
skipping: [APP_0001]

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [Clean local workdir] *****************************************************
changed: [localhost] => (item=ssh_key_APP_0001.pem)

PLAY RECAP *********************************************************************
APP_0001                   : ok=19   changed=4    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
localhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

